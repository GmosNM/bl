<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-05-05 Sun 15:08 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Biscuit Documentation</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Martin Dorazil" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Biscuit Documentation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orge5fc037">Compiler usage</a></li>
<li><a href="#orgb1d1c92">Language</a>
<ul>
<li><a href="#org8679a30">Base syntax</a></li>
<li><a href="#org46fe110">Comments</a></li>
<li><a href="#org8cb5283">Operators</a>
<ul>
<li><a href="#org2ad51c8">Binary</a></li>
<li><a href="#orgab5cd42">Unary</a></li>
<li><a href="#org58be075">Special</a></li>
</ul>
</li>
<li><a href="#org2ce3201">Data types</a>
<ul>
<li><a href="#org7d7f6a4">Fundamental data types</a></li>
<li><a href="#org92f3529">Pointers</a></li>
<li><a href="#org8ee6a12">Arrays</a></li>
<li><a href="#org6b46ff3">Strings</a></li>
<li><a href="#orgcc626f8"><span class="todo TODO">TODO</span> Array slice</a></li>
<li><a href="#org85059a6">Structures</a></li>
<li><a href="#orgd91f6e6">Enums</a></li>
<li><a href="#org6140d72"><span class="todo TODO">TODO</span> Type aliasing</a></li>
<li><a href="#org2877e09">Function type</a></li>
<li><a href="#orga4ee23b">Type casting</a></li>
</ul>
</li>
<li><a href="#orgfcf058c">Literals</a>
<ul>
<li><a href="#orgd076a04">Simple literals</a></li>
<li><a href="#org3f342d7">Numeric literals</a></li>
</ul>
</li>
<li><a href="#org21d1cb9">Variables</a></li>
<li><a href="#org10efb6f">Constants</a></li>
<li><a href="#org86de261">Compound expressions</a></li>
<li><a href="#org8c0de71">Functions</a>
<ul>
<li><a href="#org5f395f6">Named function</a></li>
<li><a href="#orgcd38aef">Anonymous function</a></li>
<li><a href="#org281b3ea">Function pointers</a></li>
<li><a href="#org8f4c5df">Functions with variable argument count</a></li>
</ul>
</li>
<li><a href="#org9b2310a">Blocks</a></li>
<li><a href="#orgfbda106">Ifs</a></li>
<li><a href="#orgf49ea2c">Loops</a></li>
<li><a href="#orgb9887bf">Break and continue</a></li>
<li><a href="#orgc5e2409">Unit tests</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orge5fc037" class="outline-2">
<h2 id="orge5fc037">Compiler usage</h2>
<div class="outline-text-2" id="text-orge5fc037">
<pre class="example">
blc [options] &lt;source-files&gt;
</pre>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Option</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">-h, -help</td>
<td class="org-left">Print usage information and exit.</td>
</tr>

<tr>
<td class="org-left">-ast-dump</td>
<td class="org-left">Print AST.</td>
</tr>

<tr>
<td class="org-left">-lex-dump</td>
<td class="org-left">Print output of lexer.</td>
</tr>

<tr>
<td class="org-left">-mir-pre-dump</td>
<td class="org-left">Print output of MIR pre analyze stage.</td>
</tr>

<tr>
<td class="org-left">-mir-post-dump</td>
<td class="org-left">Print output of MIR post analyze stage.</td>
</tr>

<tr>
<td class="org-left">-syntax-only</td>
<td class="org-left">Check syntax and exit.</td>
</tr>

<tr>
<td class="org-left">-emit-llvm</td>
<td class="org-left">Write LLVM-IR to file.</td>
</tr>

<tr>
<td class="org-left">-emit-mir</td>
<td class="org-left">Write MIR to file.</td>
</tr>

<tr>
<td class="org-left">-no-bin</td>
<td class="org-left">Don't write binary to disk.</td>
</tr>

<tr>
<td class="org-left">-no-warning</td>
<td class="org-left">Ignore all warnings.</td>
</tr>

<tr>
<td class="org-left">-verbose</td>
<td class="org-left">Verbose mode.</td>
</tr>

<tr>
<td class="org-left">-no-api</td>
<td class="org-left">Don't load internal api.</td>
</tr>

<tr>
<td class="org-left">-force-test-to-llvm</td>
<td class="org-left">Force llvm generation of unit tests.</td>
</tr>

<tr>
<td class="org-left">-run</td>
<td class="org-left">Execute 'main' method in compile time.</td>
</tr>

<tr>
<td class="org-left">-run-tests</td>
<td class="org-left">Execute all unit tests in compile time.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgb1d1c92" class="outline-2">
<h2 id="orgb1d1c92">Language</h2>
<div class="outline-text-2" id="text-orgb1d1c92">
</div>
<div id="outline-container-org8679a30" class="outline-3">
<h3 id="org8679a30">Base syntax</h3>
<div class="outline-text-3" id="text-org8679a30">
<p>
Basicly every construct in Biscuit language fallows the same rules of declaration. We define name of the entity, type and optionally some initial value.
</p>

<p>
Declarations and mutability:
</p>
<pre class="example">
&lt;name&gt;: &lt;type&gt;;              // mutable declaration
&lt;name&gt;: [type] = &lt;value&gt;;    // mutable declaration
&lt;name&gt;: [type] : &lt;value&gt;;    // immutable declaration 
</pre>

<p>
Data type is optional when we specify some value.
</p>

<div class="org-src-container">
<pre class="src src-bl"><span class="org-constant">foo</span>: <span class="org-type">s32</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">data type required</span>
<span class="org-variable-name">foo </span>:= <span class="org-constant">10</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">data type based on value type (in this case s32)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org46fe110" class="outline-3">
<h3 id="org46fe110">Comments</h3>
<div class="outline-text-3" id="text-org46fe110">
<div class="org-src-container">
<pre class="src src-bl"><span class="org-comment-delimiter">// </span><span class="org-comment">this is line comment</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> this</span>
<span class="org-comment"> is</span>
<span class="org-comment"> multi line</span>
<span class="org-comment"> comment</span>
<span class="org-comment">*/</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8cb5283" class="outline-3">
<h3 id="org8cb5283">Operators</h3>
<div class="outline-text-3" id="text-org8cb5283">
<p>
There is no operator overloading in Biscuit.
</p>
</div>

<div id="outline-container-org2ad51c8" class="outline-4">
<h4 id="org2ad51c8">Binary</h4>
<div class="outline-text-4" id="text-org2ad51c8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Symbol</th>
<th scope="col" class="org-left">Relevant for types</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">+</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Addition.</td>
</tr>

<tr>
<td class="org-left">&minus;</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Subtraction.</td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Multiplication.</td>
</tr>

<tr>
<td class="org-left">/</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Division.</td>
</tr>

<tr>
<td class="org-left">%</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Remainder division.</td>
</tr>

<tr>
<td class="org-left">+=</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Addition and assign.</td>
</tr>

<tr>
<td class="org-left">&minus;=</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Subtraction and assign.</td>
</tr>

<tr>
<td class="org-left">*=</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Multiplication and assign.</td>
</tr>

<tr>
<td class="org-left">/=</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Division and assign.</td>
</tr>

<tr>
<td class="org-left">%=</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Remainder division and assign.</td>
</tr>

<tr>
<td class="org-left">&lt;</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Less.</td>
</tr>

<tr>
<td class="org-left">&gt;</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Greater.</td>
</tr>

<tr>
<td class="org-left">&lt;=</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Less or equals.</td>
</tr>

<tr>
<td class="org-left">&gt;=</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Greater or equals.</td>
</tr>

<tr>
<td class="org-left">==</td>
<td class="org-left">Integers, Floats, Booleans</td>
<td class="org-left">Equals.</td>
</tr>

<tr>
<td class="org-left">&amp;&amp;</td>
<td class="org-left">Booleans</td>
<td class="org-left">Logical AND</td>
</tr>

<tr>
<td class="org-left">&vert;&vert;</td>
<td class="org-left">Booleans</td>
<td class="org-left">Logical</td>
</tr>
</tbody>
</table>

<p>
Usage:
</p>
<pre class="example">
&lt;expr&gt; &lt;op&gt; &lt;expr&gt;
</pre>
</div>
</div>

<div id="outline-container-orgab5cd42" class="outline-4">
<h4 id="orgab5cd42">Unary</h4>
<div class="outline-text-4" id="text-orgab5cd42">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Symbol</th>
<th scope="col" class="org-left">Relevant for types</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">+</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Positive value.</td>
</tr>

<tr>
<td class="org-left">&minus;</td>
<td class="org-left">Integers, Floats</td>
<td class="org-left">Negative value.</td>
</tr>

<tr>
<td class="org-left">&and;</td>
<td class="org-left">Pointers</td>
<td class="org-left">Pointer dereference.</td>
</tr>

<tr>
<td class="org-left">&amp;</td>
<td class="org-left">Allocated value</td>
<td class="org-left">Address of.</td>
</tr>
</tbody>
</table>

<p>
Usage:
</p>
<pre class="example">
&lt;op&gt; &lt;expr&gt;
</pre>
</div>
</div>

<div id="outline-container-org58be075" class="outline-4">
<h4 id="org58be075">Special</h4>
<div class="outline-text-4" id="text-org58be075">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Symbol</th>
<th scope="col" class="org-left">Relevant for types</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">sizeof</td>
<td class="org-left">Any</td>
<td class="org-left">Determinates size in bytes.</td>
</tr>

<tr>
<td class="org-left">alignof</td>
<td class="org-left">Any</td>
<td class="org-left">Determinates alignment of type.</td>
</tr>
</tbody>
</table>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/core.bl"</span>
<span class="linenr">2: </span>
<span class="linenr">3: </span><span class="org-preprocessor">#test</span> <span class="org-string">"special operators"</span> {
<span class="linenr">4: </span>    <span class="org-variable-name">s </span>:= <span class="org-keyword">sizeof</span>(<span class="org-type">s32</span>);  <span class="org-comment-delimiter">// </span><span class="org-comment">size in bytes</span>
<span class="linenr">5: </span>    <span class="org-variable-name">a </span>:= <span class="org-keyword">alignof</span>(<span class="org-type">s32</span>); <span class="org-comment-delimiter">// </span><span class="org-comment">alignment</span>
<span class="linenr">6: </span>};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2ce3201" class="outline-3">
<h3 id="org2ce3201">Data types</h3>
<div class="outline-text-3" id="text-org2ce3201">
</div>
<div id="outline-container-org7d7f6a4" class="outline-4">
<h4 id="org7d7f6a4">Fundamental data types</h4>
<div class="outline-text-4" id="text-org7d7f6a4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">s8</td>
<td class="org-left">Signed 8-bit number.</td>
</tr>

<tr>
<td class="org-left">s16</td>
<td class="org-left">Signed 16-bit number.</td>
</tr>

<tr>
<td class="org-left">s32</td>
<td class="org-left">Signed 32-bit number.</td>
</tr>

<tr>
<td class="org-left">s64</td>
<td class="org-left">Signed 64-bit number.</td>
</tr>

<tr>
<td class="org-left">u8</td>
<td class="org-left">Unsigned 8-bit number.</td>
</tr>

<tr>
<td class="org-left">u16</td>
<td class="org-left">Unsigned 16-bit number.</td>
</tr>

<tr>
<td class="org-left">u32</td>
<td class="org-left">Unsigned 32-bit number.</td>
</tr>

<tr>
<td class="org-left">u64</td>
<td class="org-left">Unsigned 64-bit number.</td>
</tr>

<tr>
<td class="org-left">usize</td>
<td class="org-left">Unsigned 64-bit size.</td>
</tr>

<tr>
<td class="org-left">bool</td>
<td class="org-left">Boolean. (true/false)</td>
</tr>

<tr>
<td class="org-left">f32</td>
<td class="org-left">32-bit floating point number</td>
</tr>

<tr>
<td class="org-left">f64</td>
<td class="org-left">64-bit floating point number.</td>
</tr>

<tr>
<td class="org-left">string</td>
<td class="org-left">String slice.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org92f3529" class="outline-4">
<h4 id="org92f3529">Pointers</h4>
<div class="outline-text-4" id="text-org92f3529">
<p>
Represents the address of some allocated data.
</p>

<pre class="example">
*&lt;T&gt;
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/debug.bl"</span>
<span class="linenr">2: </span>
<span class="linenr">3: </span><span class="org-preprocessor">#test</span> <span class="org-string">"pointers"</span> {
<span class="linenr">4: </span>    <span class="org-variable-name">i </span>:= <span class="org-constant">666</span>;
<span class="linenr">5: </span>    <span class="org-constant">i_ptr</span> : *<span class="org-type">s32</span> = &amp;i; <span class="org-comment-delimiter">// </span><span class="org-comment">taking the address of 'i' variable and set 'i_ptr'</span>
<span class="linenr">6: </span>    <span class="org-variable-name">j </span>:= ^i_ptr;       <span class="org-comment-delimiter">// </span><span class="org-comment">pointer dereferencing</span>
<span class="linenr">7: </span>
<span class="linenr">8: </span>    <span class="org-function-name">assert</span>(j == i);
<span class="linenr">9: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ee6a12" class="outline-4">
<h4 id="org8ee6a12">Arrays</h4>
<div class="outline-text-4" id="text-org8ee6a12">
<p>
Array is aggregate type of multiple values of the same type.
</p>
<pre class="example">
[&lt;size&gt;] &lt;T&gt;
</pre>

<p>
Arrays can be inline initialized with compound block, type is required. Zero initializer can be used for zero initialization of whole array storage, otherwise we must specify value for every element in an array.
</p>
<pre class="example">
{:&lt;T&gt;: [val], ...}
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"array type"</span> {
<span class="linenr"> 2: </span>    <span class="org-constant">arr1</span> : [<span class="org-constant">10</span>] <span class="org-type">s32</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">declare uninitialized array variable </span>
<span class="linenr"> 3: </span>    arr1[<span class="org-constant">0</span>] = <span class="org-constant">666</span>;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    arr1.len; <span class="org-comment-delimiter">// </span><span class="org-comment">yields array element count (usize)</span>
<span class="linenr"> 6: </span>    arr1.ptr; <span class="org-comment-delimiter">// </span><span class="org-comment">yields pointer to first element '&amp;arr[0]'</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">inline initialization of array type</span>
<span class="linenr"> 9: </span>    <span class="org-variable-name">arr2 </span>:= {:[<span class="org-constant">10</span>]<span class="org-type">s32</span>: <span class="org-constant">0</span> };         <span class="org-comment-delimiter">// </span><span class="org-comment">initialize whole array to 0</span>
<span class="linenr">10: </span>    <span class="org-variable-name">arr3 </span>:= {:[<span class="org-constant">4</span>]<span class="org-type">s32</span>: <span class="org-constant">1</span>, <span class="org-constant">2</span>, <span class="org-constant">3</span>, <span class="org-constant">4</span> }; <span class="org-comment-delimiter">// </span><span class="org-comment">initialize array to the sequence 1, 2, 3, 4</span>
<span class="linenr">11: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org6b46ff3" class="outline-4">
<h4 id="org6b46ff3">Strings</h4>
<div class="outline-text-4" id="text-org6b46ff3">
<p>
String type in biscuit is slice containting pointer to string data and string lenght. String literals are zero terimated.
</p>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"string type"</span> {
<span class="linenr">2: </span>    <span class="org-constant">msg</span> : <span class="org-type">string</span> = <span class="org-string">"Hello world\n"</span>; 
<span class="linenr">3: </span>    msg.len; <span class="org-comment-delimiter">// </span><span class="org-comment">character count of the string</span>
<span class="linenr">4: </span>    msg.ptr; <span class="org-comment-delimiter">// </span><span class="org-comment">pointer to the string content</span>
<span class="linenr">5: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc626f8" class="outline-4">
<h4 id="orgcc626f8"><span class="todo TODO">TODO</span> Array slice</h4>
<div class="outline-text-4" id="text-orgcc626f8">
<p>
Array slice is consist of pointer to the first array element and array lenght. 
</p>

<p>
Syntax:
</p>
<pre class="example">
[] &lt;type&gt;
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"array reference"</span> {
<span class="linenr">2: </span>    <span class="org-constant">arr</span>     : [<span class="org-constant">10</span>]<span class="org-type">s32</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">uninitialized s32 array</span>
<span class="linenr">3: </span>    <span class="org-constant">arr_ref</span> : []<span class="org-type">s32</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">reference to array of any size with s32 elements</span>
<span class="linenr">4: </span>
<span class="linenr">5: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">TODO</span>
<span class="linenr">6: </span>};
</pre>
</div>
</div>
</div>
<div id="outline-container-org85059a6" class="outline-4">
<h4 id="org85059a6">Structures</h4>
<div class="outline-text-4" id="text-org85059a6">
<p>
Structure is simple group of data.
</p>

<pre class="example">
struct { 
  &lt;member1 name&gt;: &lt;type&gt;,
  &lt;member2 name&gt;: &lt;type&gt;,
  &lt;member3 name&gt;: &lt;type&gt;
};
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/debug.bl"</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span>#<span class="org-function-name">test</span> <span class="org-string">"simple structure"</span> {
<span class="linenr"> 4: </span>    <span class="org-function-name">Foo</span> :: <span class="org-keyword">struct</span> {
<span class="linenr"> 5: </span>        <span class="org-constant">i</span>: <span class="org-type">s32</span>,
<span class="linenr"> 6: </span>        <span class="org-constant">j</span>: <span class="org-type">s32</span> 
<span class="linenr"> 7: </span>    };
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span class="org-constant">foo</span> : Foo;
<span class="linenr">10: </span>    foo.i = <span class="org-constant">10</span>;
<span class="linenr">11: </span>    foo.j = <span class="org-constant">20</span>;
<span class="linenr">12: </span>
<span class="linenr">13: </span>    <span class="org-function-name">assert</span>(foo.i == <span class="org-constant">10</span>);
<span class="linenr">14: </span>    <span class="org-function-name">assert</span>(foo.j == <span class="org-constant">20</span>);
<span class="linenr">15: </span>};
<span class="linenr">16: </span>
<span class="linenr">17: </span>#<span class="org-function-name">test</span> <span class="org-string">"anonymous structure"</span> {
<span class="linenr">18: </span>    <span class="org-function-name">foo</span> : <span class="org-keyword">struct</span> {
<span class="linenr">19: </span>        <span class="org-constant">i</span>: <span class="org-type">s32</span>,
<span class="linenr">20: </span>        <span class="org-constant">j</span>: <span class="org-type">s32</span> 
<span class="linenr">21: </span>    };
<span class="linenr">22: </span>
<span class="linenr">23: </span>    foo.i = <span class="org-constant">10</span>;
<span class="linenr">24: </span>    foo.j = <span class="org-constant">20</span>;
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span class="org-function-name">assert</span>(foo.i == <span class="org-constant">10</span>);
<span class="linenr">27: </span>    <span class="org-function-name">assert</span>(foo.j == <span class="org-constant">20</span>);
<span class="linenr">28: </span>};
<span class="linenr">29: </span>
<span class="linenr">30: </span>#<span class="org-function-name">test</span> <span class="org-string">"auto dereference for structure poiners"</span> {
<span class="linenr">31: </span>    <span class="org-function-name">Foo</span> :: <span class="org-keyword">struct</span> {
<span class="linenr">32: </span>        <span class="org-constant">i</span>: <span class="org-type">s32</span>,
<span class="linenr">33: </span>        <span class="org-constant">j</span>: <span class="org-type">s32</span> 
<span class="linenr">34: </span>    };
<span class="linenr">35: </span>
<span class="linenr">36: </span>    <span class="org-constant">foo</span> : Foo;
<span class="linenr">37: </span>    <span class="org-variable-name">foo_ptr </span>:= &amp;foo;
<span class="linenr">38: </span>    foo_ptr.i = <span class="org-constant">10</span>;
<span class="linenr">39: </span>    foo_ptr.j = <span class="org-constant">20</span>;
<span class="linenr">40: </span>
<span class="linenr">41: </span>    <span class="org-function-name">assert</span>(foo.i == <span class="org-constant">10</span>);
<span class="linenr">42: </span>    <span class="org-function-name">assert</span>(foo.j == <span class="org-constant">20</span>);
<span class="linenr">43: </span>};
<span class="linenr">44: </span>
<span class="linenr">45: </span>#<span class="org-function-name">test</span> <span class="org-string">"structure initializer"</span> {
<span class="linenr">46: </span>    <span class="org-function-name">Foo</span> :: <span class="org-keyword">struct</span> {
<span class="linenr">47: </span>        <span class="org-constant">i</span>: <span class="org-type">s32</span>,
<span class="linenr">48: </span>        <span class="org-constant">j</span>: <span class="org-type">s32</span>
<span class="linenr">49: </span>    };
<span class="linenr">50: </span>
<span class="linenr">51: </span>    <span class="org-variable-name">foo </span>:= {:Foo: <span class="org-constant">10</span>, <span class="org-constant">20</span> };
<span class="linenr">52: </span>    <span class="org-function-name">assert</span>(foo.i == <span class="org-constant">10</span>);
<span class="linenr">53: </span>    <span class="org-function-name">assert</span>(foo.j == <span class="org-constant">20</span>);
<span class="linenr">54: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd91f6e6" class="outline-4">
<h4 id="orgd91f6e6">Enums</h4>
<div class="outline-text-4" id="text-orgd91f6e6">
<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/debug.bl"</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span class="org-comment-delimiter">// </span><span class="org-comment">Enum declaration (base type is by default s32)</span>
<span class="linenr"> 4: </span><span class="org-function-name">Color</span> : <span class="org-type">type</span> : <span class="org-keyword">enum</span> {
<span class="linenr"> 5: </span>    Red,    <span class="org-comment-delimiter">// </span><span class="org-comment">default value 0</span>
<span class="linenr"> 6: </span>    Green,  <span class="org-comment-delimiter">// </span><span class="org-comment">default value 1</span>
<span class="linenr"> 7: </span>    Blue    <span class="org-comment-delimiter">// </span><span class="org-comment">default value 2</span>
<span class="linenr"> 8: </span>};
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>#<span class="org-function-name">test</span> <span class="org-string">"simple enumerator"</span> {
<span class="linenr">11: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">cast</span>(<span class="org-type">s32</span>) Color.Red == <span class="org-constant">0</span>);
<span class="linenr">12: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">cast</span>(<span class="org-type">s32</span>) Color.Green == <span class="org-constant">1</span>);
<span class="linenr">13: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">cast</span>(<span class="org-type">s32</span>) Color.Blue == <span class="org-constant">2</span>);
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Base type is s32</span>
<span class="linenr">16: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">sizeof</span>(Color) == <span class="org-constant">4</span>);
<span class="linenr">17: </span>
<span class="linenr">18: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Declare variable of type Color with value Red</span>
<span class="linenr">19: </span>    <span class="org-variable-name">color </span>:= Color.Red;
<span class="linenr">20: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">cast</span>(<span class="org-type">s32</span>) color == <span class="org-constant">0</span>);
<span class="linenr">21: </span>};
<span class="linenr">22: </span>
<span class="linenr">23: </span><span class="org-comment-delimiter">// </span><span class="org-comment">Enum declaration (base type is u8)</span>
<span class="linenr">24: </span><span class="org-function-name">Day</span> :: <span class="org-keyword">enum</span> <span class="org-type">u8</span> {
<span class="linenr">25: </span>    <span class="org-constant">Sat</span> :: <span class="org-constant">1</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">first value explicitly set to 1</span>
<span class="linenr">26: </span>    Sun,      <span class="org-comment-delimiter">// </span><span class="org-comment">implicitly set to previous value + 1 -&gt; 2</span>
<span class="linenr">27: </span>    Mon,      <span class="org-comment-delimiter">// </span><span class="org-comment">3 </span>
<span class="linenr">28: </span>    Tue,      <span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
<span class="linenr">29: </span>    Wed,
<span class="linenr">30: </span>    Thu,
<span class="linenr">31: </span>    Fri
<span class="linenr">32: </span>};
<span class="linenr">33: </span>
<span class="linenr">34: </span>#<span class="org-function-name">test</span> <span class="org-string">"enumerator"</span> {
<span class="linenr">35: </span>    <span class="org-comment-delimiter">/* </span><span class="org-comment">Day */</span> 
<span class="linenr">36: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">cast</span>(<span class="org-type">s32</span>) Day.Sat == <span class="org-constant">1</span>);
<span class="linenr">37: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">cast</span>(<span class="org-type">s32</span>) Day.Sun == <span class="org-constant">2</span>);
<span class="linenr">38: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">cast</span>(<span class="org-type">s32</span>) Day.Mon == <span class="org-constant">3</span>);
<span class="linenr">39: </span>
<span class="linenr">40: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Base type is u8</span>
<span class="linenr">41: </span>    <span class="org-function-name">assert</span>(<span class="org-keyword">sizeof</span>(Day) == <span class="org-constant">1</span>);
<span class="linenr">42: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org6140d72" class="outline-4">
<h4 id="org6140d72"><span class="todo TODO">TODO</span> Type aliasing</h4>
<div class="outline-text-4" id="text-org6140d72">
<p>
It's posible to create alias to any data type.
</p>

<pre class="example">
&lt;alias name&gt; :: &lt;type&gt;;
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"alias"</span> {
<span class="linenr">2: </span>    <span class="org-constant">T</span> :: <span class="org-type">s32</span>;
<span class="linenr">3: </span>    <span class="org-constant">i</span> : T;
<span class="linenr">4: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org2877e09" class="outline-4">
<h4 id="org2877e09">Function type</h4>
<div class="outline-text-4" id="text-org2877e09">
<p>
Type of function. 
</p>

<pre class="example">
fn ([arguments]) [return type]
</pre>

<div class="org-src-container">
<pre class="src src-bl"><span class="org-comment-delimiter">// </span><span class="org-comment">type of function without arguments and without return value</span>
<span class="org-keyword">fn</span> ()             

<span class="org-comment-delimiter">// </span><span class="org-comment">type of function without arguments, returning value of 's32' type</span>
<span class="org-keyword">fn</span> () <span class="org-type">s32</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">type of function with two arguments, returning value of 's32' type</span>
<span class="org-keyword">fn</span> (<span class="org-type">s32</span>, <span class="org-type">bool</span>) <span class="org-type">s32</span> 
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4ee23b" class="outline-4">
<h4 id="orga4ee23b">Type casting</h4>
<div class="outline-text-4" id="text-orga4ee23b">
<p>
Change type of value to other type. Conventions between integer types is generated implicitly by the compiler.
</p>

<pre class="example">
cast(&lt;T&gt;) &lt;expr&gt;
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"type cast"</span> {
<span class="linenr"> 2: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">default type of integer literal is 's32'</span>
<span class="linenr"> 3: </span>    <span class="org-variable-name">i </span>:= <span class="org-constant">666</span>; 
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">type of the integer literal is changed to u64</span>
<span class="linenr"> 6: </span>    <span class="org-constant">j</span> : <span class="org-type">u64</span> = <span class="org-constant">666</span>;
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">'j' is implicitly casted to 'u32'</span>
<span class="linenr"> 9: </span>    <span class="org-constant">k</span> : <span class="org-type">u32</span> = j;
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">implicit cast on function call</span>
<span class="linenr">12: </span>    <span class="org-keyword">fn</span> (num: <span class="org-type">u16</span>) {
<span class="linenr">13: </span>    } (j);
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">explicit cast of 'f32' type to 's32'</span>
<span class="linenr">16: </span>    <span class="org-variable-name">l </span>:= <span class="org-constant">1</span>.<span class="org-constant">5f</span>;
<span class="linenr">17: </span>    <span class="org-variable-name">m </span>:= <span class="org-keyword">cast</span>(<span class="org-type">s32</span>) l;
<span class="linenr">18: </span>};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfcf058c" class="outline-3">
<h3 id="orgfcf058c">Literals</h3>
<div class="outline-text-3" id="text-orgfcf058c">
</div>
<div id="outline-container-orgd076a04" class="outline-4">
<h4 id="orgd076a04">Simple literals</h4>
<div class="outline-text-4" id="text-orgd076a04">
<div class="org-src-container">
<pre class="src src-bl"><span class="org-constant">b</span> :: <span class="org-constant">true</span>;         <span class="org-comment-delimiter">// </span><span class="org-comment">bool true literal </span>
<span class="org-constant">b</span> :: <span class="org-constant">false</span>;        <span class="org-comment-delimiter">// </span><span class="org-comment">bool false literal </span>
<span class="org-constant">ptr</span> : *<span class="org-type">s32</span> = <span class="org-constant">null</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">*s32 null pointer literal</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3f342d7" class="outline-4">
<h4 id="org3f342d7">Numeric literals</h4>
<div class="outline-text-4" id="text-org3f342d7">
<div class="org-src-container">
<pre class="src src-bl"><span class="org-constant">i</span>     :: <span class="org-constant">10</span>;      <span class="org-comment-delimiter">// </span><span class="org-comment">s32 literal</span>
<span class="org-constant">i_hex</span> :: <span class="org-constant">0x10</span>;    <span class="org-comment-delimiter">// </span><span class="org-comment">s32 literal</span>
<span class="org-constant">f</span>     :: <span class="org-constant">13</span>.<span class="org-constant">43f</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">f32 literal</span>
<span class="org-constant">d</span>     :: <span class="org-constant">13</span>.<span class="org-constant">43</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">f64 literal</span>
<span class="org-constant">char</span>  :: 'i';     <span class="org-comment-delimiter">// </span><span class="org-comment">u8 literal </span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org21d1cb9" class="outline-3">
<h3 id="org21d1cb9">Variables</h3>
<div class="outline-text-3" id="text-org21d1cb9">
<p>
Example of variable allocated on stack.
</p>

<pre class="example">
&lt;name&gt; : &lt;type&gt;;
&lt;name&gt; : [type] = &lt;value&gt;;
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"variables"</span> {
<span class="linenr">2: </span>    <span class="org-constant">i</span> : <span class="org-type">s32</span> = <span class="org-constant">666</span>; 
<span class="linenr">3: </span>    <span class="org-variable-name">j </span>:= <span class="org-constant">666</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">type is optional here</span>
<span class="linenr">4: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org10efb6f" class="outline-3">
<h3 id="org10efb6f">Constants</h3>
<div class="outline-text-3" id="text-org10efb6f">
<p>
Example of constant allocated on stack. Constant must be initialized and cannot be changed later.
</p>

<p>
Syntax:
</p>
<pre class="example">
&lt;name&gt; : [type] : &lt;value&gt;;
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"constants"</span> {
<span class="linenr">2: </span>    <span class="org-constant">i</span> : <span class="org-type">s32</span> : <span class="org-constant">666</span>; 
<span class="linenr">3: </span>    <span class="org-constant">j</span> :: <span class="org-constant">666</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">type is optional here</span>
<span class="linenr">4: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org86de261" class="outline-3">
<h3 id="org86de261">Compound expressions</h3>
<div class="outline-text-3" id="text-org86de261">
<p>
Compound expression can be used for inline initialization of variables or directly as value.
Implicit temporary variable is created as needed. Zero initializer can be used as short for memset(0) call.
</p>

<p>
Syntax:
</p>
<pre class="example">
{:&lt;type&gt;: &lt;arg1, arg2, ...&gt;};
{:&lt;type&gt;: 0}; // zero initializer
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/core.bl"</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span class="org-preprocessor">#test</span> <span class="org-string">"array compound"</span> {
<span class="linenr"> 4: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">print out all array values</span>
<span class="linenr"> 5: </span>    <span class="org-function-name">print_arr</span> :: <span class="org-keyword">fn</span> (v: [<span class="org-constant">2</span>]<span class="org-type">s32</span>) {
<span class="linenr"> 6: </span>        <span class="org-keyword">loop</span> i := <span class="org-constant">0</span>; i &lt; v.len; i += <span class="org-constant">1</span> {
<span class="linenr"> 7: </span>            <span class="org-function-name">print</span>(<span class="org-string">"v[%] = %\n"</span>, i, v[i]);
<span class="linenr"> 8: </span>        }
<span class="linenr"> 9: </span>    };
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">create array of 2 elements directly in call</span>
<span class="linenr">12: </span>    <span class="org-function-name">print_arr</span>({:[<span class="org-constant">2</span>]<span class="org-type">s32</span>: <span class="org-constant">10</span>, <span class="org-constant">20</span>});
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">create zero initialized array</span>
<span class="linenr">15: </span>    <span class="org-function-name">print_arr</span>({:[<span class="org-constant">2</span>]<span class="org-type">s32</span>: <span class="org-constant">0</span>});
<span class="linenr">16: </span>};
<span class="linenr">17: </span>
<span class="linenr">18: </span>#<span class="org-function-name">test</span> <span class="org-string">"struct compound"</span> {
<span class="linenr">19: </span>    <span class="org-function-name">Foo</span> :: <span class="org-keyword">struct</span> {
<span class="linenr">20: </span>        <span class="org-constant">i</span>: <span class="org-type">s32</span>,
<span class="linenr">21: </span>        <span class="org-constant">j</span>: <span class="org-type">s32</span>
<span class="linenr">22: </span>    };
<span class="linenr">23: </span>
<span class="linenr">24: </span>    <span class="org-function-name">print_strct</span> :: <span class="org-keyword">fn</span> (v: Foo) {
<span class="linenr">25: </span>        <span class="org-function-name">print</span>(<span class="org-string">"v.i = %\n"</span>, v.i);
<span class="linenr">26: </span>        <span class="org-function-name">print</span>(<span class="org-string">"v.j = %\n"</span>, v.j);
<span class="linenr">27: </span>    };
<span class="linenr">28: </span>
<span class="linenr">29: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">create structure in call</span>
<span class="linenr">30: </span>    <span class="org-function-name">print_strct</span>({:Foo: <span class="org-constant">10</span>, <span class="org-constant">20</span>});
<span class="linenr">31: </span>
<span class="linenr">32: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">create zero initialized structure</span>
<span class="linenr">33: </span>    <span class="org-function-name">print_strct</span>({:Foo: <span class="org-constant">0</span>});
<span class="linenr">34: </span>};
</pre>
</div>
</div>
</div>
<div id="outline-container-org8c0de71" class="outline-3">
<h3 id="org8c0de71">Functions</h3>
<div class="outline-text-3" id="text-org8c0de71">
</div>
<div id="outline-container-org5f395f6" class="outline-4">
<h4 id="org5f395f6">Named function</h4>
<div class="outline-text-4" id="text-org5f395f6">
<p>
Examples of named function.
</p>

<pre class="example">
&lt;name&gt; : [type] : fn ([args]) [return type] {[body]};
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"named functions"</span> {
<span class="linenr"> 2: </span>    <span class="org-function-name">foo</span> :: <span class="org-keyword">fn</span> () {
<span class="linenr"> 3: </span>    };
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span class="org-function-name">bar</span> :: <span class="org-keyword">fn</span> (i: <span class="org-type">s32</span>) {
<span class="linenr"> 6: </span>        i; <span class="org-comment-delimiter">// </span><span class="org-comment">use i</span>
<span class="linenr"> 7: </span>    };
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span class="org-function-name">baz</span> :: <span class="org-keyword">fn</span> (i: <span class="org-type">s32</span>) <span class="org-type">s32</span> {
<span class="linenr">10: </span>        <span class="org-keyword">return</span> i;
<span class="linenr">11: </span>    };
<span class="linenr">12: </span>
<span class="linenr">13: </span>    <span class="org-function-name">foo</span>();
<span class="linenr">14: </span>    <span class="org-function-name">bar</span>(<span class="org-constant">666</span>);
<span class="linenr">15: </span>    <span class="org-variable-name">j </span>:= <span class="org-function-name">baz</span>(<span class="org-constant">666</span>);
<span class="linenr">16: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd38aef" class="outline-4">
<h4 id="orgcd38aef">Anonymous function</h4>
<div class="outline-text-4" id="text-orgcd38aef">
<p>
Anonymous function has no name and contains only function literal.
</p>

<pre class="example">
fn ([args]) [return type] {[body]};
</pre>

<p>
Example of anonymous function.
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr">1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"anonymous function"</span> {
<span class="linenr">2: </span>    <span class="org-function-name">i</span> := <span class="org-keyword">fn</span> (i: <span class="org-type">s32</span>) <span class="org-type">s32</span> {
<span class="linenr">3: </span>        <span class="org-keyword">return</span> i;
<span class="linenr">4: </span>    } (<span class="org-constant">666</span>);
<span class="linenr">5: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org281b3ea" class="outline-4">
<h4 id="org281b3ea">Function pointers</h4>
<div class="outline-text-4" id="text-org281b3ea">
<p>
Functions can be called via pointer. Call on <code>null</code> pointer will produce error in interpreter.
</p>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/core.bl"</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span>#<span class="org-function-name">test</span> <span class="org-string">"fn pointers"</span> {
<span class="linenr"> 4: </span>    <span class="org-function-name">foo</span> :: <span class="org-keyword">fn</span> () {
<span class="linenr"> 5: </span>        <span class="org-function-name">print</span>(<span class="org-string">"Hello from foo!!!\n"</span>);
<span class="linenr"> 6: </span>    };
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    <span class="org-function-name">bar</span> :: <span class="org-keyword">fn</span> () {
<span class="linenr"> 9: </span>        <span class="org-function-name">print</span>(<span class="org-string">"Hello from bar!!!\n"</span>);
<span class="linenr">10: </span>    };
<span class="linenr">11: </span>
<span class="linenr">12: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Grab the pointer of 'foo'</span>
<span class="linenr">13: </span>    <span class="org-variable-name">fn_ptr </span>:= &amp;foo;
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Call via pointer reference.</span>
<span class="linenr">16: </span>    <span class="org-function-name">fn_ptr</span>();
<span class="linenr">17: </span>
<span class="linenr">18: </span>    fn_ptr = &amp;bar;
<span class="linenr">19: </span>    <span class="org-function-name">fn_ptr</span>();
<span class="linenr">20: </span>    <span class="org-keyword">return</span> <span class="org-constant">0</span>;
<span class="linenr">21: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f4c5df" class="outline-4">
<h4 id="org8f4c5df">Functions with variable argument count</h4>
<div class="outline-text-4" id="text-org8f4c5df">
<p>
Biscuit supports functions with variable argument count of the same type. VArgs type must be last in function argument list. Compiler internally creates temporary array of all arguments passed in vargs. Inside function body variable argument list acts like regular array.
</p>

<p>
Example of variable argument count function:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/debug.bl"</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span class="org-function-name">sum</span> :: <span class="org-keyword">fn</span> (nums: ...<span class="org-type">s32</span>) <span class="org-type">s32</span> {
<span class="linenr"> 4: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">nums is slice of s32</span>
<span class="linenr"> 5: </span>    <span class="org-variable-name">result </span>:= <span class="org-constant">0</span>;
<span class="linenr"> 6: </span>    <span class="org-keyword">loop</span> i := <span class="org-constant">0</span>; i &lt; nums.len; i += <span class="org-constant">1</span> {
<span class="linenr"> 7: </span>        result += nums[i];
<span class="linenr"> 8: </span>    }
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    <span class="org-keyword">return</span> result;
<span class="linenr">11: </span>};
<span class="linenr">12: </span>
<span class="linenr">13: </span><span class="org-preprocessor">#test</span> <span class="org-string">"vargs"</span> {
<span class="linenr">14: </span>    <span class="org-variable-name">s </span>:= <span class="org-function-name">sum</span>(<span class="org-constant">10</span>, <span class="org-constant">20</span>, <span class="org-constant">30</span>);
<span class="linenr">15: </span>    <span class="org-function-name">assert</span>(s == <span class="org-constant">60</span>);
<span class="linenr">16: </span>
<span class="linenr">17: </span>    s = <span class="org-function-name">sum</span>(<span class="org-constant">10</span>, <span class="org-constant">20</span>);
<span class="linenr">18: </span>    <span class="org-function-name">assert</span>(s == <span class="org-constant">30</span>);
<span class="linenr">19: </span>
<span class="linenr">20: </span>    s = <span class="org-function-name">sum</span>();
<span class="linenr">21: </span>    <span class="org-function-name">assert</span>(s == <span class="org-constant">0</span>);
<span class="linenr">22: </span>};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org9b2310a" class="outline-3">
<h3 id="org9b2310a">Blocks</h3>
<div class="outline-text-3" id="text-org9b2310a">
<p>
Block can limit scope of the variable.
</p>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#load</span> <span class="org-string">"std/debug.bl"</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span class="org-preprocessor">#test</span> <span class="org-string">"blocks"</span> {
<span class="linenr"> 4: </span>    <span class="org-variable-name">a </span>:= <span class="org-constant">10</span>;
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    {
<span class="linenr"> 7: </span>        <span class="org-comment-delimiter">// </span><span class="org-comment">this variable lives only in this scope</span>
<span class="linenr"> 8: </span>        <span class="org-variable-name">i </span>:= a;
<span class="linenr"> 9: </span>        <span class="org-function-name">assert</span>(i == <span class="org-constant">10</span>);
<span class="linenr">10: </span>    }
<span class="linenr">11: </span>
<span class="linenr">12: </span>    <span class="org-variable-name">i </span>:= <span class="org-constant">20</span>;
<span class="linenr">13: </span>    <span class="org-function-name">assert</span>(i == <span class="org-constant">20</span>);
<span class="linenr">14: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfbda106" class="outline-3">
<h3 id="orgfbda106">Ifs</h3>
<div class="outline-text-3" id="text-orgfbda106">
<p>
If - else base syntax:
</p>
<pre class="example">
if &lt;condition&gt; {[then block]} [else {[else block]}]
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"ifs"</span> {
<span class="linenr"> 2: </span>    <span class="org-variable-name">b </span>:= <span class="org-constant">true</span>;
<span class="linenr"> 3: </span>    <span class="org-keyword">if</span> b {
<span class="linenr"> 4: </span>    } <span class="org-keyword">else</span> {
<span class="linenr"> 5: </span>        <span class="org-keyword">unreachable</span>;
<span class="linenr"> 6: </span>    }
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    <span class="org-variable-name">i </span>:= <span class="org-constant">10</span>;
<span class="linenr"> 9: </span>    <span class="org-keyword">if</span> i != <span class="org-constant">10</span> {
<span class="linenr">10: </span>        <span class="org-keyword">unreachable</span>;
<span class="linenr">11: </span>    } 
<span class="linenr">12: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf49ea2c" class="outline-3">
<h3 id="orgf49ea2c">Loops</h3>
<div class="outline-text-3" id="text-orgf49ea2c">
<p>
Loop base syntax:
</p>
<pre class="example">
loop {[block]} 
loop &lt;condition&gt; {[block]} 
loop &lt;initialization&gt;; &lt;condition&gt;; &lt;increment&gt; {[block]} 
</pre>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"simple loops"</span> {
<span class="linenr"> 2: </span>    <span class="org-constant">count</span> :: <span class="org-constant">10</span>;
<span class="linenr"> 3: </span>    <span class="org-variable-name">i </span>:= <span class="org-constant">0</span>;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span class="org-keyword">loop</span> {
<span class="linenr"> 6: </span>        i += <span class="org-constant">1</span>;
<span class="linenr"> 7: </span>        <span class="org-keyword">if</span> i == count { <span class="org-keyword">break</span>; }
<span class="linenr"> 8: </span>    }
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    i = <span class="org-constant">0</span>;
<span class="linenr">11: </span>    <span class="org-keyword">loop</span> i &lt; count {
<span class="linenr">12: </span>        i += <span class="org-constant">1</span>;
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span class="org-keyword">loop</span> j := <span class="org-constant">0</span>; j &lt; count; j += <span class="org-constant">1</span> {
<span class="linenr">16: </span>        <span class="org-comment-delimiter">// </span><span class="org-comment">do something amazing here</span>
<span class="linenr">17: </span>    }
<span class="linenr">18: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9887bf" class="outline-3">
<h3 id="orgb9887bf">Break and continue</h3>
<div class="outline-text-3" id="text-orgb9887bf">
<p>
Break/continue statements can be used in loops to control execution flow.
</p>

<p>
Examples:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="linenr"> 1: </span><span class="org-preprocessor">#test</span> <span class="org-string">"break and continue"</span> {
<span class="linenr"> 2: </span>    <span class="org-variable-name">i </span>:= <span class="org-constant">0</span>;
<span class="linenr"> 3: </span>    <span class="org-keyword">loop</span> {
<span class="linenr"> 4: </span>        i += <span class="org-constant">1</span>;
<span class="linenr"> 5: </span>        <span class="org-keyword">if</span> i == <span class="org-constant">10</span> { 
<span class="linenr"> 6: </span>            <span class="org-keyword">break</span>; 
<span class="linenr"> 7: </span>        } <span class="org-keyword">else</span> {
<span class="linenr"> 8: </span>            <span class="org-keyword">continue</span>;
<span class="linenr"> 9: </span>        }
<span class="linenr">10: </span>    }
<span class="linenr">11: </span>};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5e2409" class="outline-3">
<h3 id="orgc5e2409">Unit tests</h3>
<div class="outline-text-3" id="text-orgc5e2409">
<p>
Biscuit compiler supports unit testing by default.
</p>

<p>
Create unit test case:
</p>
<div class="org-src-container">
<pre class="src src-bl"><span class="org-preprocessor">#load</span> <span class="org-string">"std/debug.bl"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">function to be tested</span>
<span class="org-function-name">add</span> :: <span class="org-keyword">fn</span> (a: <span class="org-type">s32</span>, b: <span class="org-type">s32</span>) <span class="org-type">s32</span> {
  <span class="org-keyword">return</span> a + b;
};

<span class="org-preprocessor">#test</span> <span class="org-string">"this is OK"</span> {
  <span class="org-function-name">assert</span>(<span class="org-function-name">add</span>(<span class="org-constant">10</span>, <span class="org-constant">20</span>) == <span class="org-constant">30</span>); 
};

<span class="org-preprocessor">#test</span> <span class="org-string">"this is not OK"</span> {
  <span class="org-function-name">assert</span>(<span class="org-function-name">add</span>(<span class="org-constant">10</span>, <span class="org-constant">20</span>) != <span class="org-constant">30</span>); 
};
</pre>
</div>

<p>
Run tests:
</p>
<pre class="example">
$ blc -no-bin -run-tests test.bl
compiler version: 0.4.0 (pre-alpha)
compile assembly: test

executing test cases...
[ PASSED ] (1/2) /Users/travis/Desktop/test.bl:8 'this is my test'
error: execution reached unreachable code
/Users/travis/Develop/bl/api/std/debug.bl:31:5 
  30 |   if (!cond) {
  31 |     unreachable;
     |     ^^^^^^^^^^^
  32 |   }
/Users/travis/Desktop/test.bl:13:12 
  12 |    #test "this is not OK" {
  13 |      assert(add(10, 20) != 30); 
     |            ^
  14 |    };
[ FAILED ] (2/2) /Users/travis/Desktop/test.bl:12 'this is not OK'
testing done, 1 of 2 failed

compiled 47 lines in 0.001551 seconds

finished at 22-01-2019 21:28:10
done
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Martin Dorazil</p>
<p class="date">Created: 2019-05-05 Sun 15:08</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
