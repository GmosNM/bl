#import "std/test"

build :: fn () #build_entry {
    exe := add_executable("build_api_test");
    test_eq(exe.kind, TargetKind.EXECUTABLE);
    test_eq(exe.build_mode, BuildMode.DEBUG);
#if PLATFORM == Platform.WINDOWS {
    test_eq(exe.debug_info_kind, DebugInfo.CODE_VIEW);
} else {
    test_eq(exe.debug_info_kind, DebugInfo.DWARF);
}

    parent_dir: string_view;
    std.str_split_by_last(get_output_dir(exe), '/', null, &parent_dir);
    test_eq(parent_dir, "build_api_test");

    // @Incomplete: add more test here.
}
