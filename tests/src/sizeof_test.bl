/*
 * Unit test
 * -----------
 * Sizeof buildin test 
 */

#load "std/utest.bl"
using std::utest;

module size_of {
  struct A {
    i i32,
    f f64
  }
  
  struct B {
    a A,
    i i32
  }
  
  enum C i32 {
    Hello
  }
  
  enum D i64 {
    Hello
  }
  
  #test 
  fn sizeof_test() i32 {
    if sizeof(i8) != cast(size_t) 1 { return FAIL; }
    if sizeof(i16) != cast(size_t) 2 { return FAIL; }
    if sizeof(i32) != cast(size_t) 4 { return FAIL; }
    if sizeof(i64) != cast(size_t) 8 { return FAIL; }

    if sizeof(u8) != cast(size_t) 1 { return FAIL; }
    if sizeof(u16) != cast(size_t) 2 { return FAIL; }
    if sizeof(u32) != cast(size_t) 4 { return FAIL; }
    if sizeof(u64) != cast(size_t) 8 { return FAIL; }

    if sizeof(f32) != cast(size_t) 4 { return FAIL; }
    if sizeof(f64) != cast(size_t) 8 { return FAIL; }

    if sizeof(size_t) != cast(size_t) 8 { return FAIL; }
    if sizeof(string) != cast(size_t) 8 { return FAIL; }
    if sizeof(char) != cast(size_t) 1 { return FAIL; }
    if sizeof(bool) != cast(size_t) 1 { return FAIL; }

    if sizeof(A) != cast(size_t) 16 { return FAIL; }
    if sizeof(B) != cast(size_t) 24 { return FAIL; }
    if sizeof(C) != cast(size_t) 4 { return FAIL; }
    if sizeof(D) != cast(size_t) 8 { return FAIL; }
  
    return SUCCESS;
  }
}