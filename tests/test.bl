#import "extra/glwindow"

main :: fn () s32 {
    using win32;

    opt := glwindow.make_default_create_window_options();
    opt.title  = "My Window";
    opt.width  = 1024;
    opt.height = 768;

    window, err :: glwindow.create_window(&opt);
    if err { panic(err); }
    defer glwindow.destroy_window(window);

    is_running := true;
    loop is_running {
        msg: MSG;
        loop PeekMessageA(&msg, null, 0, 0, PM_REMOVE) != 0 {
            if (msg.message == WM_QUIT) {
                is_running = false;
                continue;
            }
            TranslateMessage(&msg);
            DispatchMessageA(&msg);
        }

        gl.ClearColor(0.f, 1.f, 1.f, 1.f);
        gl.Clear(GL_COLOR_BUFFER_BIT);

        glwindow.swap_buffers(window);
    }

    print("DONE\n");
    return 0;
}
